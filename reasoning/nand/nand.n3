# ------------------------
# NAND rules -- Jos De Roo
# ------------------------

@prefix list: <http://www.w3.org/2000/10/swap/list#>.
@prefix graph: <http://www.w3.org/2000/10/swap/graph#>.
@prefix log: <http://www.w3.org/2000/10/swap/log#>.

# contrapositive rule
{
    <#nand> log:equalTo <#nand>.
    ?P => false.
    ?P graph:list ?L.
    ?L list:select (?A ?B).
    (   { ?A log:equalTo { ?C => false } }
        true
        { ?C log:equalTo { ?A => false } }
    ) log:ifThenElseIn ?SCOPE.
    ?E graph:list ?B.
} => {
    ?E => ?C.
}.

{
    <#nand> log:equalTo <#nand>.
    ?P => ?C.
    ?C log:notEqualTo false.
    ?P graph:list ?L.
    ?M list:firstRest ({ ?C => false } ?L).
    ?E graph:list ?M.
} => {
    ?E => false.
}.

# resolution rule
{
    <#nand> log:equalTo <#nand>.
    ?P => ?C.
    ?P graph:list ?L.
    ?L list:notMember { <#nand> log:equalTo <#nand> }.
    ?L list:select ({ ?A => false } ?B).
    ?A => ?D.
    (   { ?B list:member { ?D => false } }
        { ?M log:equalTo ?B }
        { ?M list:firstRest ({ ?D => false } ?B) }
    ) log:ifThenElseIn ?SCOPE.
    ?E graph:list ?M.
} => {
    ?E => ?C.
}.
