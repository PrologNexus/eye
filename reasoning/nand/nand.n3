# ------------------------
# NAND rules -- Jos De Roo
# ------------------------

@prefix list: <http://www.w3.org/2000/10/swap/list#>.
@prefix graph: <http://www.w3.org/2000/10/swap/graph#>.
@prefix log: <http://www.w3.org/2000/10/swap/log#>.

# contrapositive rules
{
    <#nand> log:equalTo <#nand>.
    ?P => false.
    ?P graph:list ?Q.
    ?Q list:select ({ ?A => false } ?B).
    ?R graph:list ?B.
} => {
    ?R => ?A.
}.

{
    <#nand> log:equalTo <#nand>.
    ?P => false.
    ?P graph:list ?Q.
    ?Q list:select (?A ?B).
    ?A log:notIsomorphic { ?X => false }.
    ?R graph:list ?B.
} => {
    ?R => { ?A => false }.
}.

# resolution rule
{
    <#nand> log:equalTo <#nand>.
    ?A => ?B.
    ?A graph:list ?L.
    ?L list:notMember { <#nand> log:equalTo <#nand> }.
    ?L list:select ({ ?C => false } ?M).
    ?C => ?E.
    (   { ?M list:member { ?E => false } }
        { ?N log:equalTo ?M }
        { ?N list:firstRest ({ ?E => false } ?M) }
    ) log:ifThenElseIn ?SCOPE.
    ?F graph:list ?N.
} => {
    ?F => ?B.
}.
