# ---------------
# Towers of Hanoi
# ---------------
#
# See https://en.wikipedia.org/wiki/Tower_of_Hanoi
# Taken from the book "The Art of Prolog" by Leon Sterling and Ehud Shapiro

@prefix math: <http://www.w3.org/2000/10/swap/math#>.
@prefix list: <http://www.w3.org/2000/10/swap/list#>.
@prefix log: <http://www.w3.org/2000/10/swap/log#>.
@prefix var: <http://www.w3.org/2000/10/swap/var#>.
@prefix : <#>.

# M is the sequence of moves to move N disks from X to Y using Z as intermediary
_:cgs_1 log:isImpliedBy _:cgs_2.

_:cgs_1 {
    (var:N var:X var:Y var:Z) :moves var:M.
}

_:cgs_2 {
    var:N math:greaterThan 1.
    (var:N 1) math:difference var:N1.
    (var:N1 var:X var:Z var:Y) :moves var:M1.
    (var:N1 var:Z var:Y var:X) :moves var:M2.
    (var:M1 ((var:X var:Y)) var:M2) list:append var:M.
}

_:cgs_3 log:isImpliedBy true.

_:cgs_3 {
    (1 var:X var:Y var:Z) :moves ((var:X var:Y)).
}

# query
_:cgs_4 log:query _:cgs_4.

_:cgs_4 {
    (6 :left :right :center) :moves var:M.
}
