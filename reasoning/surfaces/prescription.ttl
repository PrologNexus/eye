# -----------------------
# Medication prescription
# -----------------------

@prefix log: <http://www.w3.org/2000/10/swap/log#>.
@prefix : <http://example.org/#>.

# patient Ann
:Ann :has :Fever.

() log:onNegativeSurface (log:and
    :Ann :has :AllergyForAspirin
).

() log:onNegativeSurface (log:and
    :Ann :has :ActivePepticUlcerDisease
).

# patient Joe
:Joe :has :AcuteMyocardialInfarction.
:Joe :has :AllergyForAspirin.

() log:onNegativeSurface (log:and
    :Joe :has :ActivePepticUlcerDisease
).
() log:onNegativeSurface (log:and
    :Joe :has :SevereAsthma
).
() log:onNegativeSurface (log:and
    :Joe :has :ChronicObstructivePulmonaryDisease
).

# medication prescription logic
(_:WHO) log:onNegativeSurface (log:and
    _:WHO :has :Fever
    () log:onNegativeSurface (log:and
        _:WHO :has :AllergyForAspirin
    )
    () log:onNegativeSurface (log:and
        _:WHO :has :ActivePepticUlcerDisease
    )
    () log:onNegativeSurface (log:and
        _:WHO :isPrescribed :aspirinHighDose
    )
).

(_:WHO) log:onNegativeSurface (log:and
    _:WHO :has :AcuteMyocardialInfarction
    () log:onNegativeSurface (log:and
        _:WHO :has :AllergyForAspirin
    )
    () log:onNegativeSurface (log:and
        _:WHO :has :ActivePepticUlcerDisease
    )
    () log:onNegativeSurface (log:and
        _:WHO :isPrescribed :aspirinLowDose
    )
).

(_:WHO) log:onNegativeSurface (log:and
    _:WHO :has :AcuteMyocardialInfarction
    () log:onNegativeSurface (log:and
        _:WHO :has :SevereAsthma
    )
    () log:onNegativeSurface (log:and
        _:WHO :has :ChronicObstructivePulmonaryDisease
    )
    () log:onNegativeSurface (log:and
        _:WHO :isPrescribed :betaBlocker
    )
).

# query
(_:WHO _:WHAT) log:onQuerySurface (log:and
    _:WHO :isPrescribed _:WHAT
).
