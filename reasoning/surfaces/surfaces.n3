# ------------
# RDF Surfaces
# ------------
#
# See https://github.com/w3c-cg/rdfsurfaces

@prefix log: <http://www.w3.org/2000/10/swap/log#>.
@prefix graph: <http://www.w3.org/2000/10/swap/graph#>.
@prefix list: <http://www.w3.org/2000/10/swap/list#>.

# create forward rule
{
    ?Graffiti1 log:nand ?Graph1.
    ?Graph1 graph:list ?List1.
    ({?Graffiti2 log:nand ?Conc} ?List1) list:select ?List2.
    ?Prem graph:list ?List2.
    ((?Prem ?Conc) ?Graffiti1) log:rule ?Rule.
} =>
    ?Rule.

# create backward rule
{
    ?Graffiti1 log:nandB ?Graph1.
    ?Graph1 graph:list ?List1.
    ({?Graffiti2 log:nandB ?Head} ?List1) list:select ?List2.
    ?Body graph:list ?List2.
    ((?Head ?Body) ?Graffiti1) log:ruleB ?RuleB.
} =>
    ?RuleB.

# create query
{
    ?Graffiti1 log:nandQ ?Graph1.
    ?Graph1 graph:list ?List1.
    ({?Graffiti2 log:nandQ ?Answer} ?List1) list:select ?List2.
    ?Question graph:list ?List2.
    ((?Question ?Answer) ?Graffiti1) log:ruleQ ?RuleQ.
} =>
    ?RuleQ.
