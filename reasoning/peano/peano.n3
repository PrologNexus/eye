@prefix log: <http://www.w3.org/2000/10/swap/log#>.
@prefix : <http://example.org/#>.

# add
{(?A 0) :add ?A} <= true.

{(?A << :s log:isFunctorOf (?B) >>) :add << :s log:isFunctorOf (?C) >>} <= {
    (?A ?B) :add ?C.
}.

# multiply
{(?A 0) :multiply 0} <= true.

{(?A << :s log:isFunctorOf (?B) >>) :multiply ?C} <= {
    (?A ?B) :multiply ?D.
    (?A ?D) :add ?C.
}.

# factorial
{?A :factorial ?B} <= {
    (?A << :s log:isFunctorOf (0) >>) :fac ?B.
}.

{(0 ?A) :fac ?A} <= true.

{(<< :s log:isFunctorOf (?A) >> ?B) :fac ?C} <= {
    (?B << :s log:isFunctorOf (?A) >>) :multiply ?D.
    (?A ?D) :fac ?C.
}.

# query
{
    (<< :s log:isFunctorOf (0) >> << :s log:isFunctorOf (<< :s log:isFunctorOf (0) >>) >>) :multiply ?A.
    (?A << :s log:isFunctorOf (<< :s log:isFunctorOf (<< :s log:isFunctorOf (0) >>) >>) >>) :add ?B.
    ?B :factorial ?C.
} =^ {
    ?B :factorial ?C.
}.
