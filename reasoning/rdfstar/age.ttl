# -----------
# Age checker
# -----------
#
# Is the age of a person above some duration?

@prefix xsd: <http://www.w3.org/2001/XMLSchema#>.
@prefix time: <http://www.w3.org/2000/10/swap/time#>.
@prefix math: <http://www.w3.org/2000/10/swap/math#>.
@prefix log: <http://www.w3.org/2000/10/swap/log#>.
@prefix var: <http://www.w3.org/2000/10/swap/var#>.
@prefix : <https://example.org/#>.

# person data
:patH :birthDay "1944-08-21"^^xsd:date.

# calculate the age of a person
<<
    log:conjunction log:isFunctorOf (
        << var:S :ageAbove var:A >>
    )
>> log:isImpliedBy <<
    log:conjunction log:isFunctorOf (
        << var:S :birthDay var:B >>
        << "" time:localTime var:D >>
        << (var:D var:B) math:difference var:F >>
        << var:F math:greaterThan var:A >>
    )
>>.

# is the age of a person above 80 years?
<<
    log:conjunction log:isFunctorOf (
        << var:S :ageAbove "P80Y"^^xsd:duration >>
    )
>> log:query <<
    log:conjunction log:isFunctorOf (
        << var:S :ageAbove "P80Y"^^xsd:duration >>
    )
>>.
