# -----------------
# Fibonacci numbers
# -----------------
#
# See https://en.wikipedia.org/wiki/Fibonacci_number

@prefix math: <http://www.w3.org/2000/10/swap/math#>.
@prefix log: <http://www.w3.org/2000/10/swap/log#>.
@prefix : <http://example.org/ns#>.

(_X _Y) log:onNegativeSurface {
    () log:onNegativeSurface <<_X :fibonacci _Y>>.
    (_X 0 1) :fib _Y.
}.

(_A _B) log:onNegativeSurface {
    () log:onNegativeSurface <<(0 _A _B) :fib _A>>.
}.

(_A _B) log:onNegativeSurface {
    () log:onNegativeSurface <<(1 _A _B) :fib _B>>.
}.

(_A _B _C _D _X _Y) log:onNegativeSurface {
    () log:onNegativeSurface <<(_X _A _B) :fib _Y>>.
    _X math:greaterThan 1.
    (_X 1) math:difference _C.
    (_A _B) math:sum _D.
    (_C _B _D) :fib _Y.
}.

# query
(_X) log:onQuerySurface {
    1 :fibonacci _X.
}.

(_X) log:onQuerySurface {
    2 :fibonacci _X.
}.

(_X) log:onQuerySurface {
    3 :fibonacci _X.
}.

(_X) log:onQuerySurface {
    91 :fibonacci _X.
}.

(_X) log:onQuerySurface {
    283 :fibonacci _X.
}.

(_X) log:onQuerySurface {
    3674 :fibonacci _X.
}.
