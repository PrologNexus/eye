# -----------------
# Fibonacci numbers
# -----------------
#
# See https://en.wikipedia.org/wiki/Fibonacci_number

@prefix math: <http://www.w3.org/2000/10/swap/math#>.
@prefix log: <http://www.w3.org/2000/10/swap/log#>.
@prefix : <http://example.org/ns#>.

(?X ?Y) log:onNegativeSurface {
    () log:onNegativeSurface <<?X :fibonacci ?Y>>.
    (?X 0 1) :fib ?Y.
}.

(?A ?B) log:onNegativeSurface {
    () log:onNegativeSurface <<(0 ?A ?B) :fib ?A>>.
}.

(?A ?B) log:onNegativeSurface {
    () log:onNegativeSurface <<(1 ?A ?B) :fib ?B>>.
}.

(?A ?B ?C ?D ?X ?Y) log:onNegativeSurface {
    () log:onNegativeSurface <<(?X ?A ?B) :fib ?Y>>.
    ?X math:greaterThan 1.
    (?X 1) math:difference ?C.
    (?A ?B) math:sum ?D.
    (?C ?B ?D) :fib ?Y.
}.

# query
(?X) log:onQuerySurface {
    1 :fibonacci ?X.
}.

(?X) log:onQuerySurface {
    2 :fibonacci ?X.
}.

(?X) log:onQuerySurface {
    3 :fibonacci ?X.
}.

(?X) log:onQuerySurface {
    91 :fibonacci ?X.
}.

(?X) log:onQuerySurface {
    283 :fibonacci ?X.
}.

(?X) log:onQuerySurface {
    3674 :fibonacci ?X.
}.
