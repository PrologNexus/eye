# ----------------
# Meta-interpreter
# ----------------
#
# Inspired by https://www.metalevel.at/acomip/

@prefix log: <http://www.w3.org/2000/10/swap/log#> .
@prefix list: <http://www.w3.org/2000/10/swap/list#> .
@prefix : <https://eyereasoner.github.io/eye/ns#> .

() log:onNegativeSurface {
    () log:onNegativeSurface <<() :mi ()>> .
} .

(skolem:A skolem:G skolem:Gs skolem:Goals) log:onNegativeSurface {
    () log:onNegativeSurface <<() :mi skolem:A>> .
    skolem:A list:firstRest (skolem:G skolem:Gs) .
    () :headBody (skolem:G skolem:Goals skolem:Gs) .
    () :mi skolem:Goals .
} .

(skolem:Rs) log:onNegativeSurface {
    () log:onNegativeSurface <<() :headBody ({() :mi ()} skolem:Rs skolem:Rs)>> .
} .

(skolem:A skolem:B skolem:Rs skolem:G skolem:Gs skolem:Goals skolem:C) log:onNegativeSurface {
    () log:onNegativeSurface <<() :headBody ({() :mi skolem:A} skolem:B skolem:Rs)>> .
    skolem:A list:firstRest (skolem:G skolem:Gs) .
    skolem:B list:firstRest ({() :headBody (skolem:G skolem:Goals skolem:Gs)} skolem:C) .
    skolem:C list:firstRest ({() :mi skolem:Goals} skolem:Rs) .
} .

(skolem:Head skolem:Goals0 skolem:Goals skolem:Rs) log:onNegativeSurface {
    () log:onNegativeSurface <<() :headBody ({() :headBody (skolem:Head skolem:Goals0 skolem:Goals)} skolem:Rs skolem:Rs)>> .
    () :headBody (skolem:Head skolem:Goals0 skolem:Goals) .
} .

(skolem:Rs) log:onNegativeSurface {
    () log:onNegativeSurface <<() :headBody ({() :natnum (0)} skolem:Rs skolem:Rs)>> .
} .

(skolem:X skolem:A skolem:Rs) log:onNegativeSurface {
    () log:onNegativeSurface <<() :headBody ({() :natnum (:s skolem:X)} skolem:A skolem:Rs)>> .
    skolem:A list:firstRest ({() :natnum skolem:X} skolem:Rs) .
} .

# question
() log:onQuestionSurface {
    () :mi ({() :mi ({() :mi ({() :natnum (:s (:s (:s (:s (:s (0))))))})})}) .
    () log:onAnswerSurface {
        :test :is true .
    } .
} .
