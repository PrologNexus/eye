# Gray Code Counter
# See https://en.wikipedia.org/wiki/Gray_code
# Taken from the book "Clause and Effect" Chapter 8

@prefix log: <http://www.w3.org/2000/10/swap/log#>.
@prefix list: <http://www.w3.org/2000/10/swap/list#>.
@prefix : <http://example.org/ns#>.
@prefix skolem: <http://eyereasoner.github.io/.well-known/genid/d7882a29-44b8-4cbc-bc70-3bd11fba1fdb#>.

(0 0) :and 0.
(0 1) :and 0.
(1 0) :and 0.
(1 1) :and 1.

(0 0) :or 0.
(0 1) :or 1.
(1 0) :or 1.
(1 1) :or 1.

0 :inv 1.
1 :inv 0.

(skolem:D skolem:Q) log:onNegativeSurface {
    () log:onNegativeSurface <<(skolem:D 0 skolem:Q) :dff skolem:Q>>.
}.

(skolem:D skolem:Q) log:onNegativeSurface {
    () log:onNegativeSurface <<(skolem:D 1 skolem:Q) :dff skolem:D>>.
}.

(skolem:A skolem:B skolem:Q skolem:T1 skolem:NA skolem:NB skolem:T2) log:onNegativeSurface {
    () log:onNegativeSurface <<(skolem:A skolem:B) :neta skolem:Q>>.
    (skolem:A skolem:B) :and skolem:T1.
    skolem:A :inv skolem:NA.
    skolem:B :inv skolem:NB.
    (skolem:NA skolem:NB) :and skolem:T2.
    (skolem:T1 skolem:T2) :or skolem:Q.
}.

(skolem:A skolem:B skolem:C skolem:Q1 skolem:Q2 skolem:T1 skolem:NC skolem:T2 skolem:NA skolem:T3) log:onNegativeSurface {
    () log:onNegativeSurface <<(skolem:A skolem:B skolem:C) :netb (skolem:Q1 skolem:Q2)>>.
    (skolem:A skolem:C) :and skolem:T1.
    skolem:C :inv skolem:NC.
    (skolem:B skolem:NC) :and skolem:T2.
    skolem:A :inv skolem:NA.
    (skolem:NA skolem:C) :and skolem:T3.
    (skolem:T1 skolem:T2) :or skolem:Q1.
    (skolem:T2 skolem:T3) :or skolem:Q2.
}.


(skolem:C skolem:Qa skolem:Qb skolem:Qc skolem:Za skolem:Zb skolem:Zc skolem:D1 skolem:D2 skolem:D3) log:onNegativeSurface {
    () log:onNegativeSurface <<(skolem:C (skolem:Qa skolem:Qb skolem:Qc)) :gcc (skolem:Za skolem:Zb skolem:Zc)>>.
    (skolem:Qa skolem:Qb skolem:Qc) :netb (skolem:D1 skolem:D2).
    (skolem:Qa skolem:Qb) :neta skolem:D3.
    (skolem:D1 skolem:C skolem:Qa) :dff skolem:Za.
    (skolem:D2 skolem:C skolem:Qb) :dff skolem:Zb.
    (skolem:D3 skolem:C skolem:Qc) :dff skolem:Zc.
}.


(skolem:S) log:onNegativeSurface {
    () log:onNegativeSurface <<(() skolem:S) :testgcc ()>>.
}.

(skolem:Cc skolem:S skolem:Nc skolem:C skolem:Cs skolem:N skolem:Ns) log:onNegativeSurface {
    () log:onNegativeSurface <<(skolem:Cc skolem:S) :testgcc skolem:Nc>>.
    skolem:Cc list:firstRest (skolem:C skolem:Cs).
    skolem:Nc list:firstRest (skolem:N skolem:Ns).
    (skolem:C skolem:S) :gcc skolem:N.
    (skolem:Cs skolem:N) :testgcc skolem:Ns.
}.

# query
(skolem:Q) log:onQuerySurface {
    ((1 1 1 1 1 1 1 1 1) (0 0 0)) :testgcc skolem:Q.
}.
