@prefix log: <http://www.w3.org/2000/10/swap/log#>.
@prefix : <http://example.org/ns#>.

# sample data
:n1 :p1 :n2; a :C1.
:n1 :p2 :n3.
:n1 :p3 :n4.
:n2 :p2 :n3.
:n3 :p4 :n5; a :C2.
:n3 :p5 :n6.
:n3 :p2 :n1.
:n6 :p6 :n7; a :C3.

# categorize
(_A _B _C _D) log:onNegativeSurface {
    _A a _B.
    _A _C _D.
    () log:onNegativeSurface {
        <<_A _C _D>> :category _B.
    }.
}.

(_A _B _C _D _E _F _G _H) log:onNegativeSurface {
    <<_A _B _C>> :category _D.
    _C _E _F.
    (_G {_C a _G} ()) log:collectAllIn _H.
    () log:onNegativeSurface {
        <<_C _E _F>> :category _D.
    }.
}.

# query
(_A _B) log:onQuerySurface {
    _A :category _B.
}.
