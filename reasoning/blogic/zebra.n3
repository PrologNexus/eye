# Einstein Riddle
# See https://en.wikipedia.org/wiki/Zebra_Puzzle
#
# There are 15 hints:
#   There are five houses.
#   The Englishman lives in the red house.
#   The Spaniard owns the dog.
#   Coffee is drunk in the green house.
#   The Ukrainian drinks tea.
#   The green house is immediately to the right of the ivory house.
#   The Old Gold smoker owns snails.
#   Kools are smoked in the yellow house.
#   Milk is drunk in the middle house.
#   The Norwegian lives in the first house.
#   The man who smokes Chesterfields lives in the house next to the man with the fox.
#   Kools are smoked in the house next to the house where the horse is kept.
#   The Lucky Strike smoker drinks orange juice.
#   The Japanese smokes Parliaments.
#   The Norwegian lives next to the blue house.
#
# The questions are:
#   Who drinks water?
#   Who owns the fish?

@prefix list: <http://www.w3.org/2000/10/swap/list#>.
@prefix log: <http://www.w3.org/2000/10/swap/log#>.
@prefix : <http://example.org/ns#>.

(skolem:L skolem:A1 skolem:A2 skolem:A3 skolem:A4 skolem:A5 skolem:A6 skolem:A7 skolem:A8 skolem:A9 skolem:A10 skolem:A11 skolem:A12 skolem:A13 skolem:A14 skolem:A15 skolem:A16 skolem:A17 skolem:A18 skolem:A19 skolem:A20
 skolem:A21 skolem:A22 skolem:A23 skolem:A24 skolem:A25 skolem:A26 skolem:A27 skolem:A28 skolem:A29 skolem:A30 skolem:A31 skolem:A32 skolem:A33 skolem:A34 skolem:A35 skolem:A36 skolem:A37 skolem:A38 skolem:A39 skolem:A40
 skolem:A41 skolem:A42 skolem:A43 skolem:A44 skolem:A45 skolem:A46 skolem:A47 skolem:A48 skolem:A49 skolem:A50 skolem:A51 skolem:A52 skolem:A53 skolem:A54 skolem:A55 skolem:A56 skolem:A57 skolem:A58 skolem:A59 skolem:A60
 skolem:A61 skolem:A62 skolem:A63 skolem:A64 skolem:A65 skolem:A66) log:onNegativeSurface {
    skolem:L log:equalTo ((skolem:A1 :Norwegian skolem:A2 skolem:A3 skolem:A4) (:blue skolem:A5 skolem:A6 skolem:A7 skolem:A8) (skolem:A9 skolem:A10 skolem:A11 :milk skolem:A12) skolem:A13 skolem:A14);
    :pair ((skolem:A15 skolem:A16 skolem:A17 skolem:A18 :Kools) (skolem:A19 skolem:A20 :horse skolem:A21 skolem:A22));
    :pair ((skolem:A23 skolem:A24 :fox skolem:A25 skolem:A26) (skolem:A27 skolem:A28 skolem:A29 skolem:A30 :Chesterfields));
    :sublist ((:ivory skolem:A31 skolem:A32 skolem:A33 skolem:A34) (:green skolem:A35 skolem:A36 :coffee skolem:A37));
    list:member (:red :Englishman skolem:A38 skolem:A39 skolem:A40);
    list:member (skolem:A41 :Spaniard :dog skolem:A42 skolem:A43);
    list:member (skolem:A44 :Ukrainian skolem:A45 :tea skolem:A46);
    list:member (skolem:A47 skolem:A48 :snails skolem:A49 :Old_Gold);
    list:member (:yellow skolem:A50 skolem:A51 skolem:A52 :Kools);
    list:member (skolem:A53 skolem:A54 skolem:A55 :orange_juice :Lucky_Strike);
    list:member (skolem:A56 :Japanese skolem:A57 skolem:A58 :Parliaments);
    list:member (skolem:A59 skolem:A60 skolem:A61 :water skolem:A62);
    list:member (skolem:A63 skolem:A64 :zebra skolem:A65 skolem:A66).
    () log:onNegativeSurface {
        skolem:A60 :drinks :water.
        skolem:A64 :owns :zebra.
        :riddle :houses skolem:L.
    }.
}.

(skolem:A skolem:B skolem:C) log:onNegativeSurface {
    () log:onNegativeSurface <<skolem:A :pair (skolem:B skolem:C)>>.
    skolem:A :sublist (skolem:B skolem:C).
}.

(skolem:A skolem:B skolem:C) log:onNegativeSurface {
    () log:onNegativeSurface <<skolem:A :pair (skolem:B skolem:C)>>.
    skolem:A :sublist (skolem:C skolem:B).
}.

(skolem:A skolem:B skolem:C skolem:D skolem:E) log:onNegativeSurface {
    () log:onNegativeSurface <<skolem:A :sublist skolem:B>>.
    (skolem:C skolem:D) list:append skolem:A.
    (skolem:E skolem:B) list:append skolem:C.
}.

# query
(skolem:A skolem:B skolem:C) log:onQuerySurface {
    skolem:A :drinks :water.
    skolem:B :owns :zebra.
    :riddle :houses skolem:C.
}.
