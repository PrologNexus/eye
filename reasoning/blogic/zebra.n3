# Einstein Riddle
# See https://en.wikipedia.org/wiki/Zebra_Puzzle
#
# There are 15 hints:
#   There are five houses.
#   The Englishman lives in the red house.
#   The Spaniard owns the dog.
#   Coffee is drunk in the green house.
#   The Ukrainian drinks tea.
#   The green house is immediately to the right of the ivory house.
#   The Old Gold smoker owns snails.
#   Kools are smoked in the yellow house.
#   Milk is drunk in the middle house.
#   The Norwegian lives in the first house.
#   The man who smokes Chesterfields lives in the house next to the man with the fox.
#   Kools are smoked in the house next to the house where the horse is kept.
#   The Lucky Strike smoker drinks orange juice.
#   The Japanese smokes Parliaments.
#   The Norwegian lives next to the blue house.
#
# The questions are:
#   Who drinks water?
#   Who owns the fish?

@prefix list: <http://www.w3.org/2000/10/swap/list#>.
@prefix log: <http://www.w3.org/2000/10/swap/log#>.
@prefix : <http://example.org/ns#>.

(_L _A1 _A2 _A3 _A4 _A5 _A6 _A7 _A8 _A9 _A10 _A11 _A12 _A13 _A14 _A15 _A16 _A17 _A18 _A19 _A20
 _A21 _A22 _A23 _A24 _A25 _A26 _A27 _A28 _A29 _A30 _A31 _A32 _A33 _A34 _A35 _A36 _A37 _A38 _A39 _A40
 _A41 _A42 _A43 _A44 _A45 _A46 _A47 _A48 _A49 _A50 _A51 _A52 _A53 _A54 _A55 _A56 _A57 _A58 _A59 _A60
 _A61 _A62 _A63 _A64 _A65 _A66) log:onNegativeSurface {
    _L log:equalTo ((_A1 :Norwegian _A2 _A3 _A4) (:blue _A5 _A6 _A7 _A8) (_A9 _A10 _A11 :milk _A12) _A13 _A14);
    :pair ((_A15 _A16 _A17 _A18 :Kools) (_A19 _A20 :horse _A21 _A22));
    :pair ((_A23 _A24 :fox _A25 _A26) (_A27 _A28 _A29 _A30 :Chesterfields));
    :sublist ((:ivory _A31 _A32 _A33 _A34) (:green _A35 _A36 :coffee _A37));
    list:member (:red :Englishman _A38 _A39 _A40);
    list:member (_A41 :Spaniard :dog _A42 _A43);
    list:member (_A44 :Ukrainian _A45 :tea _A46);
    list:member (_A47 _A48 :snails _A49 :Old_Gold);
    list:member (:yellow _A50 _A51 _A52 :Kools);
    list:member (_A53 _A54 _A55 :orange_juice :Lucky_Strike);
    list:member (_A56 :Japanese _A57 _A58 :Parliaments);
    list:member (_A59 _A60 _A61 :water _A62);
    list:member (_A63 _A64 :zebra _A65 _A66).
    () log:onNegativeSurface {
        _A60 :drinks :water.
        _A64 :owns :zebra.
        :riddle :houses _L.
    }.
}.

(_A _B _C) log:onNegativeSurface {
    () log:onNegativeSurface <<_A :pair (_B _C)>>.
    _A :sublist (_B _C).
}.

(_A _B _C) log:onNegativeSurface {
    () log:onNegativeSurface <<_A :pair (_B _C)>>.
    _A :sublist (_C _B).
}.

(_A _B _C _D _E) log:onNegativeSurface {
    () log:onNegativeSurface <<_A :sublist _B>>.
    (_C _D) list:append _A.
    (_E _B) list:append _C.
}.

# query
(_A _B _C) log:onQuerySurface {
    _A :drinks :water.
    _B :owns :zebra.
    :riddle :houses _C.
}.
