# Calculate pi using Nilakantha series
# See http://www.wikihow.com/Calculate-Pi

@prefix log: <http://www.w3.org/2000/10/swap/log#>.
@prefix math: <http://www.w3.org/2000/10/swap/math#>.
@prefix : <http://eyereasoner.github.io/eye/reasoning#>.

(?N ?Pi ?P ?A) log:onNegativeSurface {
    () log:onNegativeSurface <<(?N ?Pi) :pi true>>.
    (1 ?N 0 ?P 1) :pi true.
    (4 ?P) math:product ?A.
    (3 ?A) math:sum ?Pi.
}.

(?N ?P ?S) log:onNegativeSurface {
    () log:onNegativeSurface <<(?N ?N ?P ?P ?S) :pi true>>.
}.

(?K ?N ?P0 ?P ?S ?K1 ?K2 ?P1 ?S1 ?A ?B ?C ?D) log:onNegativeSurface {
    () log:onNegativeSurface <<(?K ?N ?P0 ?P ?S) :pi true>>.
    ?K math:notEqualTo ?N.
    (?K 1) math:sum ?K1.
    (2 ?K) math:product ?K2.
    (?K2 1) math:sum ?A.
    (?K2 2) math:sum ?B.
    (?K2 ?A ?B) math:product ?C.
    (?S ?C) math:quotient ?D.
    (?P0 ?D) math:sum ?P1.
    ?S math:negation ?S1.
    (?K1 ?N ?P1 ?P ?S1) :pi true.
}.

# query
(?Pi) log:onQuerySurface {
    (50000 ?Pi) :pi true.
}.
