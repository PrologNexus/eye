# Calculate pi using Nilakantha series
# See http://www.wikihow.com/Calculate-Pi

@prefix log: <http://www.w3.org/2000/10/swap/log#>.
@prefix math: <http://www.w3.org/2000/10/swap/math#>.
@prefix : <http://eyereasoner.github.io/eye/reasoning#>.

(_N _Pi _P _A) log:onNegativeSurface {
    () log:onNegativeSurface <<(_N _Pi) :pi true>>.
    (1 _N 0 _P 1) :pi true.
    (4 _P) math:product _A.
    (3 _A) math:sum _Pi.
}.

(_N _P _S) log:onNegativeSurface {
    () log:onNegativeSurface <<(_N _N _P _P _S) :pi true>>.
}.

(_K _N _P0 _P _S _K1 _K2 _P1 _S1 _A _B _C _D) log:onNegativeSurface {
    () log:onNegativeSurface <<(_K _N _P0 _P _S) :pi true>>.
    _K math:notEqualTo _N.
    (_K 1) math:sum _K1.
    (2 _K) math:product _K2.
    (_K2 1) math:sum _A.
    (_K2 2) math:sum _B.
    (_K2 _A _B) math:product _C.
    (_S _C) math:quotient _D.
    (_P0 _D) math:sum _P1.
    _S math:negation _S1.
    (_K1 _N _P1 _P _S1) :pi true.
}.

# query
(_Pi) log:onQuerySurface {
    (50000 _Pi) :pi true.
}.
