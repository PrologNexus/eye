# -----------------
# Gray Code Counter
# -----------------
#
# See https://en.wikipedia.org/wiki/Gray_code

@prefix rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#>.
@prefix list: <http://www.w3.org/2000/10/swap/list#>.
@prefix log: <http://www.w3.org/2000/10/swap/log#>.
@prefix var: <http://www.w3.org/2000/10/swap/var#>.
@prefix : <http://example.org/#>.

(0 0) :and 0.
(0 1) :and 0.
(1 0) :and 0.
(1 1) :and 1.

(0 0) :or 0.
(0 1) :or 1.
(1 0) :or 1.
(1 1) :or 1.

[] rdf:value 0; :inv 1.
[] rdf:value 1; :inv 0.

(log:conjoin
    ((var:D 0 var:Q) :dff var:Q)
) log:component (log:conjoin
).

(log:conjoin
    ((var:D 1 var:Q) :dff var:D)
) log:component (log:conjoin
).

(log:conjoin
    ((var:A var:B) :neta var:Q)
) log:component (log:conjoin
    ((var:A var:B) :and var:T1)
    (var:A :inv var:NA)
    (var:B :inv var:NB)
    ((var:NA var:NB) :and var:T2)
    ((var:T1 var:T2) :or var:Q)
).

(log:conjoin
    ((var:A var:B var:C) :netb (var:Q1 var:Q2))
) log:component (log:conjoin
    ((var:A var:C) :and var:T1)
    (var:C :inv var:NC)
    ((var:B var:NC) :and var:T2)
    (var:A :inv var:NA)
    ((var:NA var:C) :and var:T3)
    ((var:T1 var:T2) :or var:Q1)
    ((var:T2 var:T3) :or var:Q2)
).

(log:conjoin
    ((var:C (var:Qa var:Qb var:Qc)) :gcc (var:Za var:Zb var:Zc))
) log:component (log:conjoin
    ((var:Qa var:Qb var:Qc) :netb (var:D1 var:D2))
    ((var:Qa var:Qb) :neta var:D3)
    ((var:D1 var:C var:Qa) :dff var:Za)
    ((var:D2 var:C var:Qb) :dff var:Zb)
    ((var:D3 var:C var:Qc) :dff var:Zc)
).

(log:conjoin
    ((() var:S) :testgcc ())
) log:component (log:conjoin
).

(log:conjoin
    ((var:Cc var:S) :testgcc var:Nc)
) log:component (log:conjoin
    (var:Cc list:firstRest (var:C var:Cs))
    (var:Nc list:firstRest (var:N var:Ns))
    ((var:C var:S) :gcc var:N)
    ((var:Cs var:N) :testgcc var:Ns)
).

# query
(log:conjoin
    (((1 1 1 1 1 1 1 1 1) (0 0 0)) :testgcc var:Q)
) log:query (log:conjoin
    (((1 1 1 1 1 1 1 1 1) (0 0 0)) :testgcc var:Q)
).
