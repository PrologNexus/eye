# -----------------
# Fibonacci numbers
# -----------------
#
# See https://en.wikipedia.org/wiki/Fibonacci_number

@prefix rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#>.
@prefix math: <http://www.w3.org/2000/10/swap/math#>.
@prefix log: <http://www.w3.org/2000/10/swap/log#>.
@prefix var: <http://www.w3.org/2000/10/swap/var#>.
@prefix : <http://example.org/#>.

# backward rules
(log:conjoin
    (var:X :fibonacci var:Y)
) log:component (log:conjoin
    ((var:X 0 1) :fib var:Y)
).

(log:conjoin
    ((0 var:A var:B) :fib var:A)
) log:component (log:conjoin
).


(log:conjoin
    ((1 var:A var:B) :fib var:B)
) log:component (log:conjoin
).


(log:conjoin
    ((var:X var:A var:B) :fib var:Y)
) log:component (log:conjoin
    (var:X math:greaterThan 1)
    ((var:X 1) math:difference var:C)
    ((var:A var:B) math:sum var:D)
    ((var:C var:B var:D) :fib var:Y)
).

# query
(log:conjoin
    (0 :fibonacci var:F1)
    (1 :fibonacci var:F2)
    (6 :fibonacci var:F3)
    (91 :fibonacci var:F4)
    (283 :fibonacci var:F5)
) log:query (log:conjoin
    (0 :fibonacci var:F1)
    (1 :fibonacci var:F2)
    (6 :fibonacci var:F3)
    (91 :fibonacci var:F4)
    (283 :fibonacci var:F5)
).
