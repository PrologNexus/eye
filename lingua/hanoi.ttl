# ---------------
# Towers of Hanoi
# ---------------
#
# Taken from the book "The Art of Prolog" by Leon Sterling and Ehud Shapiro

@prefix math: <http://www.w3.org/2000/10/swap/math#>.
@prefix list: <http://www.w3.org/2000/10/swap/list#>.
@prefix lingua: <http://www.w3.org/2000/10/swap/lingua#>.
@prefix var: <http://www.w3.org/2000/10/swap/var#>.
@prefix : <#>.

# var:M is the sequence of moves to move var:N disks from var:X to var:Y using var:Z as intermediary
:hanoi_rule1 a lingua:BackwardRule;
    lingua:conclusion (lingua:graphTerm
        (var:N var:X var:Y var:Z) :moves var:M
    );
    lingua:premise (lingua:graphTerm
        var:N math:greaterThan 1
        (var:N 1) math:difference var:N1
        (var:N1 var:X var:Z var:Y) :moves var:M1
        (var:N1 var:Z var:Y var:X) :moves var:M2
        (var:M1 ((var:X var:Y)) var:M2) list:append var:M
    ).

:hanoi_rule2 a lingua:BackwardRule;
    lingua:conclusion (lingua:graphTerm
        (1 var:X var:Y var:Z) :moves ((var:X var:Y))
    );
    lingua:premise true.

# query
:hanoi_query a lingua:QueryRule;
    lingua:premise (lingua:graphTerm
        (7 :left :right :center) :moves var:M
    );
    lingua:conclusion (lingua:graphTerm
        (7 :left :right :center) :moves var:M
    ).
