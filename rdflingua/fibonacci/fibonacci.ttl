@prefix math: <http://www.w3.org/2000/10/swap/math#>.
@prefix rule: <http://www.w3.org/2000/10/swap/rule#>.
@prefix : <http://example.org/ns#>.

# backward rules
:fibonacci_rule1 a rule:BackwardRule;
    rule:vars (
        _:X
        _:Y
    );
    rule:conclusion (
        (_:X :fibon _:Y)
    );
    rule:premise (
        ((_:X 0 1) :fib _:Y)
    ).

:fibonacci_rule2 a rule:BackwardRule;
    rule:vars (
        _:A
        _:B
    );
    rule:conclusion (
        ((0 _:A _:B) :fib _:A)
    );
    rule:premise ().

:fibonacci_rule3 a rule:BackwardRule;
    rule:vars (
        _:A
        _:B
    );
    rule:conclusion (
        ((1 _:A _:B) :fib _:B)
    );
    rule:premise ().

:fibonacci_rule4 a rule:BackwardRule;
    rule:vars (
        _:X
        _:A
        _:B
        _:Y
        _:C
        _:D
    );
    rule:conclusion (
        ((_:X _:A _:B) :fib _:Y)
    );
    rule:premise (
        (_:X math:greaterThan 1)
        ((_:X 1) math:difference _:C)
        ((_:A _:B) math:sum _:D)
        ((_:C _:B _:D) :fib _:Y)
    ).

# query
:fibonacci_query a rule:QueryRule;
    rule:vars (
        _:F1
        _:F2
        _:F3
        _:F4
        _:F5
    );
    rule:premise (
        (0 :fibon _:F1)
        (1 :fibon _:F2)
        (6 :fibon _:F3)
        (91 :fibon _:F4)
        (283 :fibon _:F5)
    );
    rule:conclusion (
        (() :fibonacci (0 _:F1))
        (() :fibonacci (1 _:F2))
        (() :fibonacci (6 _:F3))
        (() :fibonacci (91 _:F4))
        (() :fibonacci (283 _:F5))
    ).
